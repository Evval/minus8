<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>WebSocket test</title>
  <script>
    let url = document.location.pathname;
    let params = url.split('/');
    let id = params.slice(2).join('')
    let ws = new WebSocket('ws://comp.local/server');

    ws.onopen = function () {
      ws.send(JSON.stringify({
        event: 'getData',
        id: id
      }))
    }

    ws.onmessage = function (msg) {
      let data = JSON.parse(msg.data);
      console.log(data);
      if (data.event === 'gamedata') document.body.append(data.game);
    }

  </script>
</head>

<body>

</body>

</html>
